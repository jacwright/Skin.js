<!DOCTYPE html>
<html>
	<head>
		<title>Skin Demo</title>
		<script src="test/jquery-1.4.4.min.js" type="text/javascript"></script>
		<script src="test/underscore-min.js" type="text/javascript"></script>
		<script src="test/backbone-min.js" type="text/javascript"></script>
		<script src="src/skin.js" type="text/javascript"></script>
		
		<script id="user" type="text/html">
            <li>
                <p>Howdy I&apos;m <a href="http://twitter.com/{{ twitter }}">@{{ twitter }}</a></p>
                <p>I work for {{ employer }} as a {{ jobTitle }}.</p>
            </li>
        </script>
		
		<script id="test" type="text/html">
			<li data-view="UserView">
				<p>{{firstName}} {{lastName}} <a href="http://twitter.com/{{ twitter }}">@{{ twitter }}</a></p>
				<p><strong>{{ employer }}</strong>: {{ jobTitle }}.</p>
				<div class="projects">
					<h3>Projects</h3>
					<div>
						{{#projects}}
						<p data-view="ProjectView">
							<strong>{{ name }}</strong>
							<label>Url:</label> {{^href}}<em>Unknown</em>{{/href}}{{#href}}<a href="{{ href }}">{{ href }}</a>{{/href}}
						</p>
						{{/projects}}
						{{^projects}}
						<em>There are no projects for {{ firstName }}</em>
						{{/projects}}
					</div>
				</div>
			</li>
		</script>
		
		<script type="text/javascript">
			
			// when the dom's ready
			$(document).ready(function () {
				
				window.user = new Backbone.Model({
					firstName: 'Jacob',
					lastName: 'Wright',
					twitter: 'jac_',
					employer: "Jive Software",
					jobTitle: "UI Engineer"
				});
				
				user.projects = new Backbone.Collection();
				
				user.projects.add({
					name: 'Skin',
					href: 'http://github.com/jacwright/skin'
				});
				
				$('#user_list').append($('#test').skin(user));
				$('#name').val(user.get('firstName') + ' ' + user.get('lastName'));
				
				// add a simple click handler for the "add user" button.
				$('#add_user').click(function () {
					var user_data, user;
					
					// build a simple user object, in a real app this would probably come from a server
					// somewhere. Otherwise hardcoding here is just silly.
					user_data = new Backbone.Model({
						name: "Jacob Wright",
						twitter: "jac_",
						employer: "Jive Software",
						jobTitle: "UI Engineer"
					});

					// Here's all the magic.
					user = $('#user').skin(user_data, true);console.log(user);
					
					// append it to the list, tada! Now go do something more useful with this.
					$('#user_list').append(user);
				});
				
				
				$('#name').bind('keydown keyup', function() {
					var name = $(this).val().split(/\s+/);
					user.set({
						firstName: name.shift() || '',
						lastName: name.shift() || ''
					});
				});
			});
			
		</script>
		
		<style>
			body {
				font-family: Helvetica;
			}
		</style>
	</head>
	<body>
		<h1>Skin Demo</h1>
		<h3>User List</h3>
		<button id="add_user">Add User</button>
		<label>User Name <input id="name" name="username" type="text"></label>
		<ul id="user_list"></ul>
	</body>
</html>
